# Test Summary: FAIL ❌

2025-12-30 13:42 - 2 Python files, 4 selftest endpoints

## All Results

### Python Test Files
- ✅ OK: `src/routers_v2/common_report_functions_v2_test.py` (68 tests)
- ❌ FAIL: `src/routers_v2/common_sharepoint_functions_v2_test.py` (missing credentials)

### Selftest Endpoints
- ✅ OK: `/v2/demorouter1/selftest` (42 tests)
- ✅ OK: `/v2/demorouter2/selftest` (18 tests)
- ✅ OK: `/v2/domains/selftest` (29 tests)
- ✅ OK: `/v2/jobs/selftest` (46 tests)

## Failed Tests

### common_sharepoint_functions_v2_test.py - FAIL ❌ (missing credentials)

```
======================================================================
common_sharepoint_functions_v2.py Test Suite
======================================================================

Test domain: AiSearchTest01
Persistent storage: E:\dev\RAGFiles2\OpenAi

Credentials from environment variables:
  CRAWLER_CLIENT_ID: (not set)
  CRAWLER_TENANT_ID: (not set)
  CRAWLER_CLIENT_CERTIFICATE_PFX_FILE: (not set)
  Cert full path:

ERROR: Missing required credentials:
  - CRAWLER_CLIENT_ID
  - CRAWLER_TENANT_ID
  - CRAWLER_CLIENT_CERTIFICATE_PFX_FILE
  - CRAWLER_CLIENT_CERTIFICATE_PASSWORD

RESULT: FAIL (missing credentials)
```

## Action Required

### 2025-12-30_13-42_TEST_FAIL_001

- **File -> Test**: `src/routers_v2/common_sharepoint_functions_v2_test.py` -> Environment-based credential test
- **What is it testing?**: This test validates SharePoint authentication and common SharePoint functions using Azure AD app registration credentials (client ID, tenant ID, and client certificate).
- **Why did it fail?**: The test requires four environment variables to be set (`CRAWLER_CLIENT_ID`, `CRAWLER_TENANT_ID`, `CRAWLER_CLIENT_CERTIFICATE_PFX_FILE`, `CRAWLER_CLIENT_CERTIFICATE_PASSWORD`) for authenticating to SharePoint, but none of these are currently configured in the environment.
- **Fix Option A (recommended)**: Set up environment variables with valid SharePoint credentials. Create a `.env` file or set system environment variables with the required Azure AD app registration details:
  - `CRAWLER_CLIENT_ID`: Azure AD application (client) ID
  - `CRAWLER_TENANT_ID`: Azure AD tenant ID
  - `CRAWLER_CLIENT_CERTIFICATE_PFX_FILE`: Path to the PFX certificate file
  - `CRAWLER_CLIENT_CERTIFICATE_PASSWORD`: Password for the PFX certificate
- **Fix Option B**: If these credentials are not available or this is an expected fail in the development environment, document this test as an "expected fail" that requires production/staging credentials. Add it to `.test-summaries/_ExpectedFails.md` to indicate it's a known limitation of the local testing environment.
