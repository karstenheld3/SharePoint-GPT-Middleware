# Test Summary: FAIL ❌

2025-12-30 13:53 - 2 Python files, 4 selftest endpoints

## All Results

### Python Test Files
- ✅ OK: `src/routers_v2/common_report_functions_v2_test.py` (68 tests)
- ❌ FAIL: `src/routers_v2/common_sharepoint_functions_v2_test.py` (0 passed, 1 failed)

### Selftest Endpoints
- ✅ OK: `/v2/demorouter1/selftest` (42 tests)
- ✅ OK: `/v2/demorouter2/selftest` (18 tests)
- ✅ OK: `/v2/domains/selftest` (29 tests)
- ✅ OK: `/v2/jobs/selftest` (46 tests)

## Failed Tests

### common_sharepoint_functions_v2_test.py - FAIL ❌ (0 passed, 1 failed)

```
======================================================================
common_sharepoint_functions_v2.py Test Suite
======================================================================

Test domain: AiSearchTest01
Persistent storage: E:\dev\RAGFiles2\OpenAi

Credentials from environment variables:
  CRAWLER_CLIENT_ID: (not set)
  CRAWLER_TENANT_ID: (not set)
  CRAWLER_CLIENT_CERTIFICATE_PFX_FILE: (not set)
  Cert full path:

ERROR: Missing required credentials:
  - CRAWLER_CLIENT_ID
  - CRAWLER_TENANT_ID
  - CRAWLER_CLIENT_CERTIFICATE_PFX_FILE
  - CRAWLER_CLIENT_CERTIFICATE_PASSWORD

RESULT: FAIL (missing credentials)
EXIT_CODE=1
```

## Action Required

### 2025-12-30_13-53_TEST_FAIL_001

- **File -> Test**: `src/routers_v2/common_sharepoint_functions_v2_test.py` -> SharePoint authentication test
- **What is it testing?**: Tests SharePoint crawler functionality that requires authentication with Microsoft SharePoint using client credentials (certificate-based authentication)
- **Why did it fail?**: Missing required environment variables for SharePoint authentication:
  - `CRAWLER_CLIENT_ID` - Azure AD application client ID
  - `CRAWLER_TENANT_ID` - Azure AD tenant ID
  - `CRAWLER_CLIENT_CERTIFICATE_PFX_FILE` - Path to certificate file (.pfx)
  - `CRAWLER_CLIENT_CERTIFICATE_PASSWORD` - Certificate password
- **Fix Option A (recommended)**: Add credentials to `.env` file or environment variables if you have SharePoint access. This test validates real SharePoint integration so it requires actual credentials to a test SharePoint tenant.
- **Fix Option B**: Mark this test as "expected to fail in CI/CD environments" by documenting it in `.test-summaries/_ExpectedFails.md` since it requires external SharePoint credentials that may not be available in all testing environments. Add logic to skip gracefully when credentials are missing rather than failing.
